#include<stdio.h>
#include<windows.h>
#include<assert.h>
#include<stdlib.h>
#pragma warning (disable:4996)

struct msg
{
	char name[10];
	char sex[10];
	char age;
	char tel[20];
	char address[20];
}message[1000];

//结构体数组下标
int count = 0;

//打印菜单选项栏
void menu()
{
	printf("*************************************************************\n");
	printf("*************************************************************\n");
	printf("*******************  1. 添加联系人信息       ****************\n");
	printf("*******************  2. 删除指定联系人信息   ****************\n");
	printf("*******************  3. 查找指定联系人信息   ****************\n");
	printf("*******************  4. 修改指定联系人信息   ****************\n");
	printf("*******************  5. 显示所有联系人信息   ****************\n");
	printf("*******************  6. 清空所有联系人       ****************\n");
	printf("*******************  7. 以名字排序所有联系人 ****************\n");
	printf("*******************  0. 退出                 ****************\n");
	printf("*************************************************************\n");
	printf("*************************************************************\n");
}

//1.    添加联系人信息
void addMessage()
{
	if (count < 1000)
	{
		printf("name\tsex\tage\ttel\t\taddress\n");
		scanf("%s %s %d %s %s", &message[count].name, &message[count].sex,
			&message[count].age, &message[count].tel, &message[count].address);
		count++;
		printf("Congratulations,you successed addMessage!\n");
	}
	else
	{
		printf("error : mail list is full!\n");
	}
}

//2.    删除指定联系人信息
void deleteMessage()
{
	if (count == 0)
	{
		printf("You have no mail list to dellete!\n");
	}
	else
	{
		char name[10];
		printf("Please input the message's name you want to delete -> ");
		scanf("%s", name);
		int i = 0;
		for (i = 0; i < count; i++)
		{
			if (strcmp(name, message[i].name) == 0)
			{
				int j = 0;
				for (j = i; j < count-1; j++)
				{
					message[j] = message[j + 1];
				}
			}
		}
	}
}

//3.    查找指定联系人信息
void findMessage()
{
	if (count)
	{
		printf("Please input the name of list you find ->");
		char name[10];
		scanf("%s", name);
		int i = 0;
		for (i = 0; i < count; i++)
		{
			if (strcmp(name, message[i].name) == 0)
			{
				printf("%s\t%s\t%d\t%s\t%s\n", message[i].name, message[i].sex,
					message[i].age, message[i].tel, message[i].address);
			}
		}
	}
	else
	{
		printf("Your mail list is empty!\n");
	}
}

//4.    修改指定联系人信息
void changeMessage()
{
	if (count)
	{
		printf("Please input the name of list you want to change ->");
		char name[10];
		scanf("%s", name);
		int i;
		for (i = 0; i < count; i++)
		{
			if (strcmp(name, message[i].name) == 0)
			{
		again:	printf("Please input message you want to change(name|sex|age|tel|address)->");
				char input[20];
				char change[20];
				scanf("%s", input);
				if (strcmp(input, "name") == 0)
				{
					printf("Please input new name ->");
					scanf("%s", change);
				//	message[i].name = change;
				}
				if (strcmp(input, "sex") == 0)
				{
					printf("Please input sex ->");
					scanf("%s", message[i].sex);
				}
				if (strcmp(input, "age") == 0)
				{
					printf("Please input age ->");
					scanf("%s", message[i].age);
				}
				if (strcmp(input, "tel") == 0)
				{
					printf("Please input new tel ->");
					scanf("%s", message[i].tel);
				}
				if (strcmp(input, "address") == 0)
				{
					printf("Please input new address ->");
					scanf("%s", message[i].address);
				}
				printf("Congratulationgs,you successed changemessage!\n");
				printf("Are you want to changed again?(Y|N)\n");
				char s = 0;
				scanf("%c", s);
				if (strcmp(s, 'Y') == 0)
				{
					goto again;
				}
				if (strcmp(s, 'N') == 0)
				{
					break;
				}
			}
		}
	}
}

//5.    显示所有联系人信息
void desplayMessage()
{
	if (count != 0)
	{
		int i = 0;
		printf("name\tsex\tage\ttel\t\taddress\n");
		for (i = 0; i < count; i++)
		{
			printf("%s\t%s\t%d\t%s\t%s\n", message[i].name, message[i].sex,
				message[i].age, message[i].tel, message[i].address);
		}
	}
	else
	{
		printf("Your mail list is empty!\n");
	}
}

void clearMessage()
{
	memset(&message, 0, sizeof (struct msg));
}

void nameSort()
{

}



int main()
{
	int input = 0;
	menu();
	while (1)
	{
		printf("Please choose <0—7> : ");
		scanf("%d", &input);
		switch (input)
		{
		case 0:
			exit(0);
			break;
		case 1:
			addMessage();
			break;
		case 2:
			deleteMessage();
			break;
		case 3:
			findMessage();
			break;
		case 4:
			changeMessage();
			break;
		case 5:
			desplayMessage();
			break;
		case 6:
			clearMessage();
			break;
		case 7:
			nameSort();
			break;
		default:
			break;
		}
	}
	system("pause");
	return 0;
}
